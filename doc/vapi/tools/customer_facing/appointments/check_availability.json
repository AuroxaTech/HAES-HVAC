{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Check Availability Tool",
  "description": "Check next available appointment slots",
  "tool_definition": {
    "type": "function",
    "function": {
      "name": "check_availability",
      "description": "Get the next two available appointment slots (no booking). Use when customer asks 'when are you available?' or before booking. Returns next_available_slots. After the customer chooses a slot, call schedule_appointment with chosen_slot_start set to the chosen slot's start from next_available_slots.",
      "parameters": {
        "type": "object",
        "properties": {
          "service_type": {
            "type": "string",
            "description": "Type of service needed"
          },
          "preferred_date": {
            "type": "string",
            "description": "Preferred date for availability check"
          },
          "preferred_time": {
            "type": "string",
            "description": "Earliest time for slots (e.g. 15:00 for after 3pm, 17 for 5pm). Use when customer says they need later-in-day (e.g. I work until 3pm, something after work)."
          },
          "urgency": {
            "type": "string",
            "enum": ["emergency", "urgent", "routine"],
            "description": "Pass the urgency the customer stated. emergency=same-day slots, urgent=2-3 days out, routine=~7 days out."
          },
          "property_type": {
            "type": "string",
            "enum": ["residential", "commercial", "property_management"],
            "description": "Type of property"
          },
          "zip_code": {
            "type": "string",
            "description": "ZIP code for technician assignment"
          }
        }
      }
    }
  },
  "async": false,
  "server": {
    "url": "https://haes-hvac.fly.dev/vapi/server"
  }
}
